<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <title>Lee Morgan -lecture-</title>
        <link rel="stylesheet" href="/learn/style">
    </head>
    <body id="lectureBody">
        <h1 id="title"></h1>

        <h3 id="course"></h3>

        <h6 id="date"></h6>

        <iframe id="video"></iframe>

        <div id="lectureData">
            <h2 id="exerciseTitle">Exercises</h2>
            <ol id="exercises"></ol>

            <h2 id="readingTitle">Further Reading</h2>
            <ul id="readings"></ul>
            
            <h2 id="resourceTitle">Resources</h2>
            <div id="documents"></div>
        </div>
            
        <script>
            let video = document.getElementById("video");

            let sizeIframe = ()=>{
                let width = window.innerWidth;
                let height = window.innerHeight;
                video.width = width * 0.75;
                video.height = height * 0.75;
            }

            video.onload = sizeIframe();
            let id = window.location.href.split("/");
            id = id[id.length-1];

            fetch(`/learn/lectures/json/one/${id}`)
                .then(response => response.json())
                .then((response)=>{
                    let date = new Date(response.createdDate);

                    document.getElementById("title").innerText = response.title;
                    document.getElementById("course").innerText = response.course.title;
                    document.getElementById("date").innerText = date.toDateString();
                    video.src = response.video;

                    let documents = document.getElementById("documents");
                    if(response.documents.length === 0) document.getElementById("resourceTitle").style.display = "none";
                    for(let i = 0; i < response.documents.length; i++){
                        let a = document.createElement("a");
                        a.classList.add("liPad");
                        a.href = response.documents[i].link;
                        a.innerText = response.documents[i].name.replaceAll("_", " ");
                        documents.appendChild(a);
                    }
                    
                    let exercises = document.getElementById("exercises");
                    if(response.exercises.length === 0) document.getElementById("exerciseTitle").style.display = "none";
                    for(let i = 0; i < response.exercises.length; i++){
                        let li = document.createElement("li");
                        li.classList.add("liPad");
                        li.innerText = response.exercises[i];
                        exercises.appendChild(li);
                    }

                    let readings = document.getElementById("readings");
                    if(response.furtherReading.length === 0) document.getElementById("readingtitle").style.display = "none";
                    for(let i = 0; i < response.furtherReading.length; i++){
                        let li = document.createElement("li");
                        li.classList.add("liPad");
                        readings.appendChild(li);

                        let a = document.createElement("a");
                        a.href = response.furtherReading[i].link;
                        a.innerText = response.furtherReading[i].text;
                        li.appendChild(a);
                    }
                })
                .catch((err)=>{});
        </script>
    </body>
</html>